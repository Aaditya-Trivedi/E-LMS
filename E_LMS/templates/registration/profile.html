{% extends 'base.html' %}
{% block content %}

<!-- PAGE TITLE
================================================== -->
<!-- PAGE TITLE -->
<header class="py-8 py-md-5" style="background-image: none;">
    <div class="container text-center py-xl-2">
        <h1 class="display-4 fw-semi-bold mb-0">Profile Update</h1>

        <nav aria-label="breadcrumb">
            <ol class="breadcrumb breadcrumb-scroll justify-content-center">
                <li class="breadcrumb-item">
                    <a class="text-gray-800" href="{% url 'home' %}">
                        Home
                    </a>
                </li>
                <li class="breadcrumb-item text-gray-800 active" aria-current="page">
                    Profile Update
                </li>
            </ol>
        </nav>
    </div>
</header>

<!-- Card -->
<div class="card" style="width: 80%; margin-left: 10%;">
    <div class="card-body">
                {% include 'components/msg.html' %}

        <form method="post" action="{% url 'profile_update' %}">
            {% csrf_token %}

            <!-- User Info -->
            <div class="row">
                <div class="col">
                    <div class="form-group mb-4">
                        <label>First Name</label>
                        <input type="text" class="form-control" name="first_name" placeholder="Enter First Name" value="{{ user.first_name }}">
                    </div>
                </div>
                <div class="col">
                    <div class="form-group mb-4">
                        <label>Last Name</label>
                        <input type="text" class="form-control" name="last_name" placeholder="Enter Last Name" value="{{ user.last_name }}">
                    </div>
                </div>
                <div class="col">
                    <div class="form-group mb-4">
                        <label>Username</label>
                        <input type="text" class="form-control" name="username" value="{{ user.username }}" readonly>
                    </div>
                </div>
                <div class="col">
                    <div class="form-group mb-4">
                        <label>Email</label>
                        <input type="email" class="form-control" name="email" value="{{ user.email }}" readonly>
                    </div>
                </div>
            </div>

            <!-- Role -->
            <div class="form-group mb-4">
                <label>Role</label>
                <input type="text" class="form-control" name="role" value="{{ user.role|title }}" readonly>
            </div>

            <!-- Conditional Fields -->
            {% if user.role == "student" %}
                <h5 class="mt-4">Student Details</h5>
                <div class="row">
                    <div class="col">
                        <label>Contact No</label>
                        <input type="text" class="form-control" name="contact_no" value="{{ user.student_profile.contact_no }}" maxlength="10">
                    </div>
                    <div class="col">
                        <label>Date of Birth</label>
                        <input type="date" class="form-control" name="date_of_birth" value="{{ user.student_profile.date_of_birth|date:'Y-m-d' }}">
                    </div>
                </div>
                <div class="form-group mt-3">
                    <label>Address</label>
                    <textarea class="form-control" name="address">{{ user.student_profile.address }}</textarea>
                </div>
                <div class="row mt-3">
                    <div class="col">
                        <label>Gender</label>
                        <select class="form-control" name="gender">
                            <option value="">Select</option>
                            <option value="Male" {% if user.student_profile.gender == "Male" %}selected{% endif %}>Male</option>
                            <option value="Female" {% if user.student_profile.gender == "Female" %}selected{% endif %}>Female</option>
                            <option value="Other" {% if user.student_profile.gender == "Other" %}selected{% endif %}>Other</option>
                        </select>
                    </div>
                    <div class="col">
                        <label>Education</label>
                        <input type="text" class="form-control" name="education" value="{{ user.student_profile.education }}">
                    </div>
                </div>
                <div class="form-group mt-3">
                    <label>Status</label>
                    <select class="form-control" name="status">
                        <option value="active" {% if user.student_profile.status == "active" %}selected{% endif %}>Active</option>
                        <option value="inactive" {% if user.student_profile.status == "inactive" %}selected{% endif %}>Inactive</option>
                    </select>
                </div>
            {% elif user.role == "teacher" %}
                <h5 class="mt-4">Teacher Details</h5>
                <div class="form-group">
                    <label>Qualification</label>
                    <textarea class="form-control" name="qualification">{{ user.teacher_profile.qualification }}</textarea>
                </div>
                <div class="form-group mt-3">
                    <label>Experience (Years)</label>
                    <input type="number" class="form-control" name="experience" value="{{ user.teacher_profile.experience }}">
                </div>
                <div class="form-group mt-3">
                    <label>Bio</label>
                    <textarea class="form-control" name="bio">{{ user.teacher_profile.bio }}</textarea>
                </div>
                <div class="form-group mt-3">
                    <label>Rating (Read-only)</label>
                    <input type="text" class="form-control" value="{{ user.teacher_profile.rating }}" readonly>
                </div>
            {% elif user.role == "admin" %}
                <h5 class="mt-4">Admin Details</h5>
                <div class="form-group">
                    <label>Contact No</label>
                    <input type="text" class="form-control" name="contact_no" value="{{ user.admin_profile.contact_no }}">
                </div>
            {% endif %}

            <!-- Password -->
            <div class="form-group mt-4">
                <label>Password</label>
                <input type="password" class="form-control" name="password" placeholder="Fill only if you want to change password">
            </div>

            <button type="submit" class="btn btn-primary mt-3">Update Profile</button>
        </form>
    </div>
</div>


<br>

{% endblock %}